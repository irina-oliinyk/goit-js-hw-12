{"version":3,"file":"commonHelpers.js","sources":["../src/img/error.svg","../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__8479b7dd__\"","// Функції для HTTP-запитів\n\nimport axios from 'axios';\n\nconst BASE_URL = \"https://pixabay.com\";\nconst ENDPOINT = \"api/\";\nconst API_KEY = \"44801301-54ead35aff71c3b10e6d6b08d\";\n\naxios.defaults.baseURL = BASE_URL;\n\nfunction getFhotos({ q = \"\", page = 1, per_page = 15, orientationPhoto ='horizontal',typeImage='photo', safesearch='true' } = {}) {\n  return axios\n    .get(ENDPOINT, {\n      params: {\n        key: API_KEY,\n        q,\n        page,\n        per_page,\n        language: \"en\",\n        orientationPhoto,\n        typeImage,\n        safesearch\n      },\n    })\n    .then(({ data }) => data);\n}\n\nexport { getFhotos };\n\n\n\n","// Функції для відображення елементів інтерфейсу\n\n// Функції для відображення елементів інтерфейсу\n\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  \nconst list = document.querySelector('.gallery');\n  \nfunction createMarcap(images) {\n  list.innerHTML = '';\n  const markup = images\n    .map(\n      ({ largeImageURL, webformatURL ,tags, likes, views, comments, downloads }) =>\n               `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n          <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"320\" height=200\" class=\"card-img\"/>\n        </a>\n        <ul class=\"galery-item-description\">\n          <li>\n            <p class=\"count-text\">Likes</p>\n            <p class=\"count\">${likes}</p>\n          </li>\n          <li>\n            <p class=\"count-text\">Views</p>\n            <p class=\"count\">${views}</p>\n          </li>\n          <li>\n            <p class=\"count-text\">Comments</p>\n            <p class=\"count\">${comments}</p>\n          </li>\n          <li>\n            <p class=\"count-text\">Downloads</p>\n            <p class=\"count\">${downloads}</p>\n          </li>\n        </ul>\n      </li>\n      `\n    )\n        .join('');\n    list.insertAdjacentHTML('afterbegin', markup);\n\n  lightbox.refresh();\n};\n\nexport { createMarcap };","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport icon from './img/error.svg'\n\n\n\nimport { getFhotos } from \"./js/pixabay-api.js\";\n\nimport { createMarcap } from \"./js/render-function.js\";\n\nconst refs = {\n    form: document.querySelector('.form'),\n    list: document.querySelector('.gallery'),\n    buttonLoadMore: document.querySelector('[data-action=\"load-more\"]'),\n    spinner: document.querySelector('.loader')\n};\n console.log(refs.spinner);\n\nconst params = {\n  q: \"\",\n  page: 1,\n  per_page: 15,\n  maxPage: 0,\n  orientationPhoto: 'horizontal',\n  typeImage: 'photo',\n  safesearch:'true',\n};\n\nrefs.form.addEventListener('submit', handleSearch);\n\n\n// ховаємо кнопку при першому завантаженні сторінки\nrefs.buttonLoadMore.classList.add('visually-hidden');\n\nconsole.log(refs.buttonLoadMore);\nasync function handleSearch(event) {\n    event.preventDefault(); // step 1.1\n\n    // step 1.2.\n    refs.list.innerHTML = \"\";\n    params.page = 1;\n\n    const form = event.currentTarget;\n    params.q = form.elements.query.value.trim(); // step 1.3.\n\n    // 1.4.\n    if (!params.q) {\n        iziToast.show({\n      backgroundColor: '#ef4040',\n      close: false,\n      closeOnClick: true,\n      progressBarColor: 'white',\n      title: 'Error',\n      titleColor: 'white',\n      position: 'topRight',\n      messageColor: 'white',\n      messageSize: '16px',\n      message: 'Sorry, ', \n      icon: 'icon-error.svg',\n      iconUrl: icon\n        });\n        form.reset();\n      return;\n      // there are no images matching your search query. Please try again!\n    }\n    console.log(params.q);\n    // перед запитом показую кнопку та включаю спінер\n   refs.buttonLoadMore.classList.remove('visually-hidden');\n  \n   refs.buttonLoadMore.disabled = true;\n   refs.spinner.classList.remove('visually-hidden');\n  \n    // перед запитом показую кнопку та включаю спінер\n  try {\n      \n    const { hits, totalHits } = await getFhotos(params);\n    console.log(hits);\n    console.log(totalHits);\n    params.maxPage = Math.ceil(totalHits / params.per_page);\n    // Функція для розмальовки \n    createMarcap(hits);\n      \n    //перевірка на те, що по-перше, у нас взагалі є результати, і на те, що кількість статей не дорівнює кількості всіх результатів (якщо вони рівні, то у нас не існує наступних сторінок)\n    if (hits.length > 0 && hits.length !== totalHits) {\n      // розблоковуємо кнопку для натискань\n      // refs.loadMoreBtn.disabled = false;\n      refs.buttonLoadMore.disabled = false;\n      refs.spinner.classList.add('visually-hidden');\n      // коли кнопка розблокується і стане доступною для взаємодії - ми повісимо на неї обробник\n      // refs.loadMoreBtn.addEventListener(\"click\", handleLoadMore);\n      refs.buttonLoadMore.addEventListener(\"click\", handleLoadMore);\n    } else {\n      // ховаємо кнопку якщо немає результатів по запиту, або не існує наступної сторінки\n      refs.buttonLoadMore.classList.add('visually-hidden');\n      refs.spinner.classList.add('visually-hidden');\n      iziToast.show({\n      backgroundColor: '#ef4040',\n      close: false,\n      closeOnClick: true,\n      progressBarColor: 'white',\n      title: 'Error',\n      titleColor: 'white',\n      position: 'topRight',\n      messageColor: 'white',\n      messageSize: '16px',\n      message: 'Це все, що ми маємо на цей запит!',\n      icon: 'icon-error.svg',\n      iconUrl: icon\n        });\n    }\n    } catch(err) {\n    console.log(err);\n    \n    iziToast.show({\n      backgroundColor: '#ef4040',\n      close: false,\n      closeOnClick: true,\n      progressBarColor: 'white',\n      title: 'Error',\n      titleColor: 'white',\n      position: 'topRight',\n      messageColor: 'white',\n      messageSize: '16px',\n      message: 'Схоже виникла помилка!',\n      icon: 'icon-error.svg',\n      iconUrl: icon\n        });\n }finally {\n    form.reset();\n  }\n\n}\n\n\n\nasync function handleLoadMore() {\n  params.page += 1;\n  \n  refs.buttonLoadMore.disabled = true;\n  refs.spinner.classList.remove('visually-hidden');\n  try {\n    // отримали відповідь від серверу з новинами\n    const { hits } = await getFhotos(params);\n \n    // малюємо розмітку\n    createMarcap(hits);\n\n    refs.spinner.classList.add('visually-hidden');\n    const { height: cardHeight } =\n      refs.list.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2, // Прокручувати на висоту двох карток\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    console.log(err);\n    refs.spinner.classList.add('visually-hidden');\n    iziToast.show({\n      backgroundColor: '#ef4040',\n      close: false,\n      closeOnClick: true,\n      progressBarColor: 'white',\n      title: 'Error',\n      titleColor: 'white',\n      position: 'topRight',\n      messageColor: 'white',\n      messageSize: '16px',\n      message: 'Sorry, there are no images matching your search query. Please try again!',\n      icon: 'icon-error.svg',\n      iconUrl: icon\n        });\n  } finally {\n    // розблоковуємо кнопку для натискань\n    \n    refs.buttonLoadMore.disabled = false;\n    refs.spinner.classList.add('visually-hidden');\n\n    // якщо поточна сторінка рівна максимальні сторінці, то наступних сторінок не існує\n    if (params.page === params.maxPage) {\n      refs.buttonLoadMore.classList.add('visually-hidden');\n      refs.buttonLoadMore.removeEventListener(\"click\", handleLoadMore);\n      iziToast.show({\n      backgroundColor: '#ef4040',\n      close: false,\n      closeOnClick: true,\n      progressBarColor: 'white',\n      title: 'Error',\n      titleColor: 'white',\n      position: 'topRight',\n      messageColor: 'white',\n      messageSize: '16px',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      icon: 'icon-error.svg',\n      iconUrl: icon\n        });\n    }\n  }\n}\n\n\n\n\n"],"names":["icon","BASE_URL","ENDPOINT","API_KEY","axios","getFhotos","q","page","per_page","orientationPhoto","typeImage","safesearch","data","lightbox","SimpleLightbox","list","createMarcap","images","markup","largeImageURL","webformatURL","tags","likes","views","comments","downloads","refs","params","handleSearch","event","form","iziToast","hits","totalHits","handleLoadMore","err","cardHeight"],"mappings":"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"}